<header>
    <h1>Ofertas guardadas</h1>
</header>
<main>
    <table mat-table [dataSource]="offers()">

        <!-- Puesto -->
        <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef>Puesto</th>
            <td mat-cell *matCellDef="let offer">{{ offer.title }}</td>
        </ng-container>

        <!-- Empresa -->
        <ng-container matColumnDef="company">
            <th mat-header-cell *matHeaderCellDef>Empresa</th>
            <td mat-cell *matCellDef="let offer">{{ offer.company }}</td>
        </ng-container>

        <!-- Fecha -->
        <ng-container matColumnDef="date">
            <th mat-header-cell *matHeaderCellDef>Fecha</th>
            <td mat-cell *matCellDef="let offer">{{ formatDate(offer.date) }}</td>
        </ng-container>

        <!-- Enviada -->
        <ng-container matColumnDef="submitted">
            <th mat-header-cell *matHeaderCellDef>Enviada</th>
            <td mat-cell *matCellDef="let offer">
                @if( offer.submitted){
                <mat-icon class="submit">check_circle</mat-icon>
                }
                @if( !offer.submitted){
                <mat-icon>cancel</mat-icon>
                }
            </td>
        </ng-container>

        <!-- Acciones -->
        <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef matTooltip="Menú de opciones">
                <mat-icon>settings</mat-icon>
            </th>
            <td mat-cell *matCellDef="let offer" matTooltip="Desplegar opciones">
                <button matIconButton [matMenuTriggerFor]="actions" aria-label="abrir acciones para esta oferta">
                    <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #actions="matMenu">
                    <button mat-menu-item [routerLink]="['/edit-offer', offer.id]" matTooltip="Editar"
                        matTooltipShowDelay="500000">
                        <mat-icon>edit</mat-icon>
                        <span>Editar</span>
                    </button>

                    <button mat-menu-item (click)="delete(offer.id)" matToolTip="Borrar">
                        <mat-icon>delete</mat-icon>
                        <span>Borrar</span>
                    </button>

                    <button mat-menu-item [routerLink]="['/view-offer', offer.id]" matTooltip="Ver oferta">
                        <mat-icon>visibility</mat-icon>
                        <span>Ver</span>
                    </button>
                </mat-menu>
            </td>
        </ng-container>

        <!-- Header y rows -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

    </table>
</main>

<footer>
    <button matButton="filled" routerLink="/new-offer">
        <mat-icon>add</mat-icon>
        Añadir nueva oferta
    </button>
</footer>