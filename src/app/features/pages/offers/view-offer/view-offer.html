@if (offer()) {
<section>
    <header>
        <h1>{{ offer()!.title }}</h1>
    </header>
    <main>
        <p><strong>Empresa:</strong> {{ offer()!.company }}</p>
        <p><strong>Ubicación:</strong> {{ offer()!.location || 'No especificada' }}</p>
        <p><strong>Fecha:</strong> {{ offer()!.date | date: 'longDate' }}</p>
        <p><strong>Estado:</strong> {{ offer()!.status }}</p>

        <a [href]="offer()!.offerUrl" target="_blank"><strong>Enlace a la oferta</strong> </a>

        <a [href]="offer()!.companyUrl" target="_blank"><strong>Web de la empresa</strong> </a>

        <p><strong>Jornada:</strong> {{ offer()!.schedule }}</p>
        <p><strong>Contrato:</strong> {{ offer()!.contractType }}</p>

        <p><strong>Salario ofrecido por la empresa:</strong>
            {{ offer()!.companySalary || 'No especificado' }}
        </p>
        <p><strong>Salario deseado:</strong>
            {{ offer()!.desiredSalary || 'No especificado' }}
        </p>


        @if (formattedCoverLetter().length) {
        <mat-accordion>
            <mat-expansion-panel (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
                <mat-expansion-panel-header>
                    <mat-panel-title> Carta de presentación </mat-panel-title>

                </mat-expansion-panel-header>
                @for (line of formattedCoverLetter(); track $index) {
                <p>{{ line }}</p>
                }
            </mat-expansion-panel>
        </mat-accordion>
        }

        @if (formattedOfferDescription().length) {
        <mat-accordion>
            <mat-expansion-panel (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
                <mat-expansion-panel-header>
                    <mat-panel-title> Descripción de la oferta </mat-panel-title>

                </mat-expansion-panel-header>
                @for (line of formattedOfferDescription(); track $index){
                <p>{{ line }}</p>
                }

            </mat-expansion-panel>
        </mat-accordion>

        }

        @if (formattedObjective().length) {
        <mat-accordion>
            <mat-expansion-panel (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
                <mat-expansion-panel-header>
                    <mat-panel-title> Objetivo Personal </mat-panel-title>
                </mat-expansion-panel-header>
                @for (line of formattedObjective(); track $index) {
                <p>{{ line }}</p>
                }
            </mat-expansion-panel>
        </mat-accordion>

        }

        @if (offer()!.selectionStages.length > 0) {
        <article>
            <h2>Etapas del proceso de selección</h2>
            <ul>
                @for (stage of offer()!.selectionStages; track stage.name) {
                <li>
                    ✔️ <strong>{{ stage.name }}</strong>
                    @if (stage.date) {
                    – {{ stage.date | date: 'mediumDate' }}
                    }
                    @if (!stage.completed) {
                    <span>(pendiente)</span>
                    }
                </li>
                }
            </ul>
        </article>
        }

    </main>
</section>
}